-function(){"use strict";function e(){this.g={}}function t(e,t){this.b=e,this.A=t,this.m=this.handleMetricEvent_.bind(this)}var i=function(e,t){if(e.contains&&1==t.nodeType)return e==t||e.contains(t);if("undefined"!=typeof e.compareDocumentPosition)return e==t||Boolean(16&e.compareDocumentPosition(t));for(;t&&e!=t;)t=t.parentNode;return t==e};e.prototype.add=function(e,t){var i="string"==typeof e?e:e.getString();this.g[i]||(this.g[i]=[]),this.g[i].push(t)};var n=function(e){var t,i=[],n="object"==typeof gwd&&"GwdId"in gwd;for(t in e.g)i.push(n?new gwd.GwdId(t):t);return i},a=function(e,t){return t?e.g["string"==typeof t?t:t.getString()]||[]:[]};t.prototype.observe=function(e){if(e.nodeType==Node.ELEMENT_NODE)for(var t=n(this.b),r=0;r<t.length;r++){var o=s(t[r]);if(o&&i(e,o)){var d=a(this.b,t[r]);d&&d.forEach(function(e){o.addEventListener(e.event,this.m,!1)}.bind(this))}}};var r=function(e,t){if(t.nodeType==Node.ELEMENT_NODE)for(var r=n(e.b),o=0;o<r.length;o++){var d=s(r[o]);if(d&&i(t,d)){var l=a(e.b,r[o]);l&&l.forEach(function(e){d.removeEventListener(e.event,this.m,!1)}.bind(e))}}};t.prototype.handleMetricEvent_=function(e){this.A(e)};var s=function(e){return"string"==typeof e?document.getElementById(e):e.getElement(document)};document.registerElement&&document.registerElement("gwd-metric-event",{prototype:Object.create(HTMLElement.prototype,{})}),document.registerElement&&document.registerElement("gwd-metric-configuration",{prototype:Object.create(HTMLElement.prototype,{})}),document.registerElement&&document.registerElement("gwd-exit",{prototype:Object.create(HTMLElement.prototype,{})}),document.registerElement&&document.registerElement("gwd-timer",{prototype:Object.create(HTMLElement.prototype,{})}),document.registerElement&&document.registerElement("gwd-doubleclick",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){this.s=this.handleEnablerInit_.bind(this),this.p=this.handleEnablerVisible_.bind(this),this.t=this.handleEnablerPageLoaded_.bind(this),this.i=this.handleEnablerExpandStart_.bind(this),this.h=this.handleEnablerCollapseStart_.bind(this),this.m=this.handleMetricEvent_.bind(this),this.v=this.handlePageTransitionEnd_.bind(this),this.w=this.handleResize_.bind(this),this.k=this.l=!1,this.q=[],this.j=!1,this.F=this.hasAttribute("fullscreen"),this.o=null,this.d=!1,this.n=window.innerHeight>=window.innerWidth?1:2,this.c=null},enumerable:!0},attachedCallback:{value:function(){Enabler.addEventListener(studio.events.StudioEvent.EXPAND_START,this.i),Enabler.addEventListener(studio.events.StudioEvent.COLLAPSE_START,this.h),Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_EXPAND_START,this.i),Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_COLLAPSE_START,this.h),this.a=this.querySelector("[is=gwd-pagedeck]"),this.a.addEventListener("pagetransitionend",this.v,!1),this.c=document.getElementById(this.getAttribute("data-provider")),this.b=this.getMetricConfiguration_(),this.u=new t(this.b,this.m),window.addEventListener("resize",this.w,!1)},enumerable:!0},detachedCallback:{value:function(){Enabler.removeEventListener(studio.events.StudioEvent.INIT,this.s),Enabler.removeEventListener(studio.events.StudioEvent.VISIBLE,this.p),Enabler.removeEventListener(studio.events.StudioEvent.PAGE_LOADED,this.t),Enabler.removeEventListener(studio.events.StudioEvent.EXPAND_START,this.i),Enabler.removeEventListener(studio.events.StudioEvent.COLLAPSE_START,this.h),Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_EXPAND_START,this.i),Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_COLLAPSE_START,this.h),this.a.removeEventListener("pagetransitionend",this.v,!1),window.removeEventListener("resize",this.w,!1)},enumerable:!0},initAd:{value:function(){this.j=!1,this.onEnablerInit_(this.s)},enumerable:!0},exit:{value:function(e,t,i,n){Enabler.exit(e,t),("undefined"==typeof n||n)&&this.pauseMedia_(),i&&this.goToPage()},enumerable:!0},exitOverride:{value:function(e,t,i,n){Enabler.exitOverride(e,t),("undefined"==typeof n||n)&&this.pauseMedia_(),i&&this.goToPage()},enumerable:!0},incrementCounter:{value:function(e,t){Enabler.counter(e,t)},enumerable:!0},startTimer:{value:function(e){Enabler.startTimer(e)},enumerable:!0},stopTimer:{value:function(e){Enabler.stopTimer(e)},enumerable:!0},reportManualClose:{value:function(){Enabler.reportManualClose()},enumerable:!0},getMetricConfiguration_:{value:function(){var t=this.querySelector("gwd-metric-configuration"),i=new e;if(t)for(var t=Array.prototype.slice.call(t.getElementsByTagName("gwd-metric-event")),n=0;n<t.length;n++){var a=t[n],r=a.getAttribute("source");if(r){var s=a.getAttribute("exit"),a={event:a.getAttribute("event"),D:a.getAttribute("metric")||s,B:a.hasAttribute("cumulative"),exit:s};i.add(this.getIdentifier_(r),a)}}return i}},handleMetricEvent_:{value:function(e){var t,i=this.getIdentifier_(e.target),n=i+": "+e.type;e:{t=a(this.b,i);for(var r=0;r<t.length;r++)if(t[r].event==e.type){t=t[r];break e}t=void 0}t.exit&&e.detail&&e.detail.url?(Enabler.exitOverride(i+": "+t.exit,e.detail.url),e.detail.handled=!0,e.detail.collapse&&this.goToPage()):this.incrementCounter(t.D||n,t.B)}},onEnablerInit_:{value:function(e){Enabler.isInitialized()?e():Enabler.addEventListener(studio.events.StudioEvent.INIT,e)},enumerable:!1},handleEnablerInit_:{value:function(){this.hasAttribute("polite-load")?this.onEnablerPageLoaded_(this.t):this.onEnablerVisible_(this.p)},enumerable:!1},onEnablerVisible_:{value:function(e){Enabler.isVisible()?e():Enabler.addEventListener(studio.events.StudioEvent.VISIBLE,e)},enumerable:!1},handleEnablerVisible_:{value:function(e){if(!this.j){var t;e&&(t=e.detail),e=this.renderAd_.bind(this,t),this.isDynamicAd_()?this.handleDynamicData_(e):e()}},enumerable:!1},onEnablerPageLoaded_:{value:function(e){Enabler.isPageLoaded()?e():Enabler.addEventListener(studio.events.StudioEvent.PAGE_LOADED,e)},enumerable:!1},handleEnablerPageLoaded_:{value:function(){this.onEnablerVisible_(this.p)},enumerable:!1},isDynamicAd_:{value:function(){return!!this.c},enumerable:!1},handleDynamicData_:{value:function(e){if(this.c){var t=this.c.getData(),i=this.onDynamicDataReady_.bind(this,e);t?i():e(),this.c.addEventListener("ready",i)}else e()},enumerable:!1},onDynamicDataReady_:{value:function(e){var t=document.getElementsByTagName("gwd-data-binder");if(0<t.length){var t=t[0],i=this.c.getData(),n=this.a.getElementsBySelector("*"),n=n.concat(this.a.getPages());t.bindData(i,n)}e()},enumerable:!1},renderAd_:{value:function(e){if(!this.j){this.j=!0;var t;e?(t=document.createEvent("CustomEvent"),t.initCustomEvent("adinitialized",!0,!0,e)):(t=document.createEvent("Event"),t.initEvent("adinitialized",!0,!0)),this.dispatchEvent(t),this.goToPage()}},enumerable:!1},goToPage:{value:function(e,t,i,n,a){var r=this.a.getPage(this.a.currentIndex);(e=e?this.a.getPage(e):this.a.getDefaultPage())&&(this.e=e.id,t&&(this.f={transition:t,duration:i,C:n,direction:a}),r&&e&&this.shouldExpand_(r,e)?this.expand_():r&&e&&this.shouldCollapse_(r,e)?this.d?Enabler.requestFullscreenCollapse():Enabler.requestCollapse():(this.k=this.l=!1,this.goToNextPage_()))},enumerable:!0,writable:!0},expand_:{value:function(){if(this.F&&!1!==this.o)if(this.o)this.d=!0,Enabler.requestFullscreenExpand();else{var e=function(t){this.o=!!t.supported,this.expand_(),Enabler.removeEventListener(studio.events.StudioEvent.FULLSCREEN_SUPPORT,e)}.bind(this);Enabler.addEventListener(studio.events.StudioEvent.FULLSCREEN_SUPPORT,e),Enabler.queryFullscreenSupport()}else Enabler.requestExpand()}},shouldExpand_:{value:function(e,t){return!this.l&&!e.hasAttribute("expanded")&&t.hasAttribute("expanded")}},shouldCollapse_:{value:function(e,t){return!this.k&&e.hasAttribute("expanded")&&!t.hasAttribute("expanded")}},handleEnablerExpandStart_:{value:function(){this.l=!0,this.d?Enabler.finishFullscreenExpand():Enabler.finishExpand(),setTimeout(this.goToNextPage_.bind(this),30)},enumerable:!1},handleEnablerCollapseStart_:{value:function(){this.k=!0,this.d?(Enabler.finishFullscreenCollapse(),this.d=!1):Enabler.finishCollapse(),this.e||(this.reportManualClose(),this.e=this.a.getDefaultPage().id),setTimeout(this.goToNextPage_.bind(this),30)},enumerable:!1},handleResize_:{value:function(){if(!this.e){var e=window.innerHeight>=window.innerWidth?1:2;this.n!=e&&(this.n=e,(e=this.a.getPage(this.a.currentIndex))&&this.goToPage(e.id))}}},goToNextPage_:{value:function(){if(this.e){this.n=window.innerHeight>=window.innerWidth?1:2;var e=this.a.getOrientationSpecificPage(this.n,this.e);this.f?this.a.goToPage(e.id,this.f.transition,this.f.duration,this.f.C,this.f.direction):this.a.goToPage(e.id),this.d&&e.classList.add("fs")}this.f=this.e=void 0}},handlePageTransitionEnd_:{value:function(e){if(this.k=this.l=!1,e.target==this.a){var t=e.detail;e=t.outgoingPage,t=t.incomingPage,e&&this.handlePageUnbound_(e),this.handlePageBound_(t)}},enumerable:!1},handlePageBound_:{value:function(e){if(this.u.observe(e),(e=e.querySelectorAll("video"))&&0<e.length){var t=studio.video&&studio.video.Reporter,i=this.registerVideoElements_.bind(this);this.r=Array.prototype.slice.call(e),t?i():Enabler.loadModule(studio.module.ModuleId.VIDEO,i)}},enumerable:!1},handlePageUnbound_:{value:function(e){r(this.u,e),(e=e.querySelectorAll("video"))&&0<e.length&&this.unregisterVideoElements_()},enumerable:!1},registerVideoElements_:{value:function(){for(var e,t;this.r.length;)t=this.r.shift(),(e=this.getIdentifier_(t))&&(studio.video.Reporter.attach(e,t,t.autoplay),this.q.push(e))},enumerable:!1},unregisterVideoElements_:{value:function(){for(this.r=[];this.q.length;)studio.video.Reporter.detach(this.q.shift())},enumerable:!1},isGwdIdLoaded_:{value:function(){return"object"==typeof gwd&&"GwdId"in gwd},enumerable:!1},getIdentifier_:{value:function(e){return this.isGwdIdLoaded_()?new gwd.GwdId(e).getString():"string"==typeof e?e:e.id},enumerable:!1},pauseMedia_:{value:function(){Array.prototype.slice.call(this.a.querySelectorAll("video, gwd-youtube, audio")).forEach(function(e){e.pause()})},enumerable:!1}})})}();